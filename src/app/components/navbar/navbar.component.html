<div (click)="hiddenOvarlay()"  [ngClass]="{'translate-x-0':switchCarts || switchProfile || showFormUpdateProfile ,  'translate-x-full': !(switchCarts || switchProfile || showFormUpdateProfile)}" class="fixed z-20 top-20 bg-black/50 h-screen w-full "></div>

<nav class="flex h-20  justify-between z-50 px-5 xl:px-0 xl:justify-evenly py-5  bg-white  border-b fixed top-0  w-full  items-center ">


   <button (click)="switchOnNavbar()" class="flex flex-col outline-none gap-2 items-center  transition duration-500 hover:bg-zinc-200  hover:shadow-sm justify-center rounded-full   h-10 w-10 ">
    <span class="bg-zinc-500 h-[2px] w-1/2 block "></span>
    <span class="bg-zinc-500 h-[2px] w-1/2 block "></span>
   </button>



  <div>
    <h1 [routerLink]="['home']"  class="pacifico-regular font-extrabold cursor-pointer text-xl md:text-3xl xl:text-4xl text-color ">Foodify</h1>
  </div>




  <div class="flex justify-center pt-2 items-center gap-3">
<!-- search -->
 <div (click)="swithOnSearch()" class="rounded-full cursor-pointer flex justify-center items-center hover:shadow-sm h-10 w-10 hover:bg-zinc-200  transition duration-500">
      <i style="color: #71717a; " class="fa-solid fa-magnifying-glass fa-lg"></i> 
   
    </div>


    <!-- notification -->
    <div  (click)="swithOnNotification()" class="rounded-full cursor-pointer flex justify-center items-center relative hover:shadow-sm h-10 w-10 hover:bg-zinc-200  transition duration-500">
      <i style="color: #71717a; " class="fa-regular cursor-pointer fa-bell fa-lg"></i> 
      <span class="top-0 left-6 z-10 absolute  w-3.5 h-3.5 mainColor border-2 border-buffer rounded-full"></span>
    </div>

    <!-- cart -->
    <div (click)="switchOnCart()" class="rounded-full relative cursor-pointer flex justify-center items-center hover:shadow-sm h-10 w-10 hover:bg-zinc-200  transition duration-500">
      <i style="color: #71717a; " class="fa-solid fa-cart-shopping fa-lg"></i> 
      <span class="-top-1 left-6 z-10 absolute  flex justify-center items-center w-6 text-white font-semibold h-6 mainColor border-2 border-buffer rounded-full">{{_Cartservices.Statuscart().length}}</span>

    </div>



  </div>

</nav> 

<!-- search -->

<div>
  
<form   [ngClass]="{'translate-y-24':switchOffsearch,'-translate-y-full':switchOffsearch == false}" class=" z-40 w-full transition duration-500  md:w-1/2 xl:w-1/3 top-0 translate-x-1/2 right-1/2 fixed ">   
    <label for="search" class="block mb-2.5 text-sm font-medium text-heading sr-only ">Search</label>
    <div class="relative">
        <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
            <svg class="w-4 h-4 text-body" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"/></svg>
        </div>
        <input [(ngModel)]="searchValue" name="search" type="search" id="search" class="block w-full shadow-md  p-3 ps-9 bg-neutral-secondary-medium border border-default-medium text-heading text-sm rounded-base rounded-full outline-none focus:ring-brand focus:border-brand shadow-xs placeholder:text-body" placeholder="Search" required />
    </div>
</form>

</div>



<!-- notification -->
<div  [ngClass]="{'translate-y-24':switchNotification,'-translate-y-full':switchNotification == false}" id="toast-notification" class="w-full bg-white top-0 z-40 rounded-2xl shadow-md space-y-4 transition duration-500 md:max-w-xs fixed md:right-0 xl:right-56 2xl:right-96  p-3 text-body bg-neutral-primary-soft rounded-base shadow-xs border border-default" role="alert">
    <div class="flex items-center bg-neutral-tertiary py-2 px-2.5 rounded">
        <span class="text-sm font-medium text-heading">New notification</span>
    </div>
    <div class="flex">
       <p class="pacifico-regular font-semibold">The notifications feature will be available soon</p>
    </div>
    <div class="flex items-center w-1/2 space-x-3">
        <button (click)="swithOnNotification()"  type="button" data-dismiss-target="#toast-notification" class="w-full text-body bg-neutral-secondary-medium box-border border border-default-medium hover:bg-neutral-tertiary-medium hover:text-heading focus:ring-4 focus:ring-green-700 shadow-xs font-medium leading-5 rounded-base text-xs px-3 py-1.5 focus:outline-none">Close</button>
      
    </div>
</div>




<!-- divNavbar -->
 <div [ngClass]="{'translate-y-24':switchNavbar,'-translate-y-full':switchNavbar == false}"  class=" cursor-pointer w-full bg-white border  fixed left-0 2xl:left-40 p-3 top-0 flex flex-col gap-2 duration-500 transition md:w-1/2 2xl:w-1/4 rounded-2xl shadow-md z-40 ">
<a (click)="switchOnNavbar();switchOnProfile()" class="p-3 w-full text-center transition duration-500 hover:bg-zinc-200 rounded-xl font-semibold">Profile</a>
<a (click)="switchOnNavbar()" [routerLink]="['home']" class="p-3 w-full text-center transition duration-500 hover:bg-zinc-200 rounded-xl font-semibold">Home</a>
<a (click)="switchOnNavbar()" [routerLink]="['categories']" class="p-3 w-full text-center transition duration-500 hover:bg-zinc-200 rounded-xl font-semibold">Categories</a>
<a (click)="switchOnNavbar()" [routerLink]="['favourite']" class="p-3 w-full text-center transition duration-500 hover:bg-zinc-200 rounded-xl font-semibold">Favorite</a>
<a (click)="logout();switchOnNavbar()"  class="p-3 w-full text-center transition text-red-800 duration-500 hover:bg-zinc-200 rounded-xl font-semibold">logout <i class="fa-solid fa-right-to-bracket"></i></a>

 </div>



<!--div search  -->

<div [ngClass]="{'fixed':searchValue!== '','hidden':searchValue== ''}" class="h-2/4 shadow-md translate-x-1/2 right-1/2 top-36 border overflow-y-auto flex w-full md:w-1/2 xl:w-1/3 bg-white z-30  flex-col justify-start items-start rounded-md ">
  @for (reco of arrRecommend | searchByRecommend:searchValue; track $index) {
    <div (click)="swithOnSearch()" [routerLink]="['/user/dishes/',reco.id]"  class="flex justify-start p-2 w-full cursor-pointer gap-2  border-b-2 hover:bg-slate-200 ">
       <img class="rounded-full w-11 h-11" [src]="reco.image" alt="">
      <div class="flex flex-col ">
         <p class="pacifico-regular font-semibold">{{reco.name}}</p>
         <p>{{reco.description}}</p>
         <div class="flex justify-start gap-1">
         <img *ngFor="let stars of [].constructor(reco?.rating || 0)" src="../../../assets/Images_home/card/Vector (1).png" alt="">
         </div>
      </div>
    </div>

  }

</div>


<!-- cart -->

<div [ngClass]="{'translate-x-0':switchCarts,'translate-x-full':switchCarts == false}" class="h-screen p-3  right-0 transform transition duration-500 bg-white  w-full md:w-1/2 xl:w-1/3 2xl:w-1/5  shadow-md top-20 z-30 fixed">
<div class="flex items-start justify-between">
                <h2 id="drawer-title" class="text-lg font-medium pacifico-regular ">Foodify cart</h2>
                <div class="ml-3 flex h-7 items-center">
                  <button (click)="switchOnCart()" type="button" command="close" commandfor="drawer" class="relative -m-2 p-2 text-gray-400 hover:text-green-900" aria-expanded="true">
      
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-slot="icon" aria-hidden="true" class="size-6">
                      <path d="M6 18 18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                  </button>
                </div>
              </div>

               <div class="mt-8">
                  <ul role="list" class="-my-6 h-96 overflow-y-auto divide-y divide-gray-200">
                    @for (itemCart of _Cartservices.Statuscart() ; track $index) {
                    <li class="flex py-6">
                      <div class="size-24 shrink-0 overflow-hidden rounded-full border border-gray-200">
                        <img [src]="itemCart.image" alt="Salmon orange fabric pouch with match zipper, gray zipper pull, and adjustable hip belt." class="size-full object-cover">
                      </div>

                      <div class="ml-4 flex flex-1 flex-col">
                        <div>
                          <div class="flex justify-between text-base font-medium text-gray-900">
                            <h3>
                              <a href="#">{{itemCart.name}}</a>
                            </h3>
                            <p class="ml-4">{{itemCart.subtotal | number:'1.0-0'}} EGP</p>
                          </div>
                          <p class="mt-1 text-sm text-gray-500">calories:  {{itemCart.kcal}}  Kcal</p>
                          <p class="mt-1 text-sm text-gray-500">price: {{itemCart.price | number:'1.0-0'}} EGP</p>
                        </div>
                        <div class="flex flex-1 items-end justify-between text-sm">
                          <p class="text-gray-500">Qty: {{itemCart.quantity}}</p>
                             <div class="flex items-center">
                                    <button (click)="decrement(itemCart)"  type="button" id="decrement-button" 
                                        data-input-counter-decrement="counter-input"
                                        class="inline-flex h-5 w-5 shrink-0 items-center justify-center rounded-md border border-gray-300 bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-100 ">
                                        <svg class="h-2.5 w-2.5 text-gray-900 " aria-hidden="true"
                                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 2">
                                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                                stroke-width="2" d="M1 1h16" />
                                        </svg>
                                    </button>
                                    <!-- incriment -->

                                    <!-- input -->
                                    <input  type="number " data-input-counter [value]="itemCart.quantity"
                                        class="w-10 shrink-0 border-0 bg-transparent text-center text-sm font-medium text-gray-900 focus:outline-none focus:ring-0 ">


                                    <button type="button"  (click)="Increment(itemCart)"
                                        data-input-counter-increment="counter-input"
                                        class="inline-flex h-5 w-5 shrink-0 items-center justify-center rounded-md border border-gray-300 bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-100">
                                        <svg class="h-2.5 w-2.5 text-gray-900 " aria-hidden="true"
                                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 18">
                                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                                stroke-width="2" d="M9 1v16M1 9h16" />
                                        </svg>
                                    </button>
                                </div>
                          

                          <div class="flex">
                            <button (click)="DeleteItem(itemCart)" type="button" class="font-medium text-color">Remove</button>
                          </div>
                        </div>
                      </div>
                    </li>
                  }
                  </ul>
               </div>

            <!-- checkout -->
               <div class="border-t  absolute bottom-44 bg-white w-full border-gray-200 pr-4 py-6 ">
             
              <div class="flex justify-between text-base font-medium text-gray-900">
                <p>items</p>
                <p>{{_Cartservices.summary().total_items}}</p>
              </div>

               <div class="flex justify-between text-base font-medium text-gray-900">
                <p>Subtotal</p>
                <p>{{_Cartservices.summary().total_price| number:'1.0-0'}} EGP</p>
              </div>
             
              <div class="mt-6">
                <a (click)="switchOnCart()" [routerLink]="['Payment']"class="flex items-center justify-center rounded-md border border-transparent mainColor pr-6 py-3 text-base font-medium text-white shadow-xs ">Checkout</a>
              </div>
              <div class="mt-6 flex justify-center text-center text-sm text-gray-500">
                <p>
                
                  <button (click)="switchOnCart()" type="button" command="close" commandfor="drawer" class="font-medium text-color " aria-expanded="true">
                    Close
                    <span aria-hidden="true"> â†’</span>
                  </button>
                </p>
              </div>
            </div>
            
</div>


<!-- profile -->
<div [ngClass]="{'translate-x-0':switchProfile,'-translate-x-full':switchProfile == false}" class="h-screen p-3  left-0 transform transition duration-500 bg-white   w-full md:w-1/2 xl:w-1/3 2xl:w-1/5  shadow-md top-20 z-30 fixed">

  <div class="flex items-start justify-between">
                <h2 id="drawer-title" class="text-lg font-medium pacifico-regular ">Profile</h2>
                <div class="ml-3 flex h-7 items-center">
                  <button (click)="switchOnProfile()" type="button" command="close" commandfor="drawer" class="relative -m-2 p-2 text-gray-400 hover:text-green-900" aria-expanded="true">
      
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-slot="icon" aria-hidden="true" class="size-6">
                      <path d="M6 18 18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                  </button>
                </div>
              </div>

<div class="relative bg-neutral-primary-soft  w-full p-2  flex flex-col justify-center items-center  rounded-base shadow-xs">
        <button (click)="fnOpenDropDown()" id="dropdownButton" data-dropdown-toggle="dropdown" class="absolute top-2 end-2 text-body hover:text-heading bg-neutral-primary-soft box-border border border-transparent hover:bg-neutral-tertiary focus:ring-4 focus:ring-neutral-tertiary rounded-base p-1.5 focus:outline-none" type="button">

            <svg class="w-6 h-6" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="3" d="M6 12h.01m6 0h.01m5.99 0h.01"/></svg>
        </button>
        <!-- Dropdown menu -->
        <div [ngClass]="{'block':OpenDropDown,'hidden':OpenDropDown == false}" id="dropdown" class="z-10 bg-neutral-primary-medium border border-default-medium rounded-base shadow-lg w-36  absolute right-0 top-14 bg-white">
            <ul class="p-2 text-sm text-body font-medium" aria-labelledby="dropdownButton">
                <li>
                    <a (click)="fnshowFormUpdateProfile()" class="inline-flex items-center transition duration-500 hover:bg-zinc-200 cursor-pointer w-full p-2 hover:bg-neutral-tertiary-medium hover:text-heading rounded-md">Edit</a>
                </li>
             
            </ul>
        </div>
    <div class="flex justify-center w-full flex-col items-center">


<div class="relative w-10 h-10 overflow-hidden bg-gray-100 rounded-full dark:bg-gray-600">
    <svg class="absolute w-12 h-12 text-gray-400 -left-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path></svg>
</div>


        <h5 class="mb-0.5 text-xl font-semibold tracking-tight text-heading">{{profile().full_name}}</h5>
        <span class=" text-sm text-body"><span class="font-semibold">Phone: </span>{{profile().phone}}</span>
        <span class=" text-sm text-body"><span class="font-semibold">Email: </span>{{profile().email}}</span>
        <!-- <span class=" text-sm text-body"><span class="font-semibold">birthday: </span>{{profile().birthday || 'please set birthday'}}</span> -->
        <!-- <span class=" text-sm text-body"><span class="font-semibold">address: </span>{{profile().address || 'please set address'}}</span> -->
        <span class=" text-sm text-body"><span class="font-semibold">Creat-At: </span>{{profile().created_at | date:'dd/MM/yyyy - hh:mm a'}}</span>
        <span class=" text-sm text-body"><span class="font-semibold">Update-At: </span>{{profile().updated_at | date:'dd/MM/yyyy - hh:mm a'}}</span>
        <div class="flex mt-4 md:mt-6 gap-4">
          
          
        </div>
    </div>
</div>

</div>




<!-- form Edit profile-->
<form [ngClass]="{'flex':showFormUpdateProfile,'hidden':showFormUpdateProfile == false}" [formGroup]="dataProfile" (ngSubmit)="fnDataProfile(dataProfile)"  class=" justify-center w-full md:w-1/2 2xl:w-1/3 z-30 bg-white fixed shadow-md -translate-y-1/2 left-1/2 top-1/2 rounded-xl -translate-x-1/2 p-2 flex-col gap-2 items-center " action="">

       <p class="text-2xl font-bold pacifico-regular"> Update Profile </p>
    
         
 <div class="w-11/12 md:w-3/4">

       <input  [value]="profile().name"
      type="text"  formControlName="full_name"
      class="block p-2 w-full text-sm outline-none rounded-1 border border-gray-300  "
      placeholder="Enter your Full Name">
     <p *ngIf="dataProfile.get('full_name')?.errors?.['minlength'] && dataProfile.get('full_name')?.invalid  " class="text-red-500 text-sm">{{'Name must be at least 3 characters'}}</p>
    <p *ngIf=" !dataProfile.get('full_name')?.errors?.['minlength'] && dataProfile.get('full_name')?.errors?.['required'] && dataProfile.get('full_name')?.touched " class="text-red-500 text-sm">{{'Name required'}}</p>

    <p *ngIf="!dataProfile.get('full_name')?.errors?.['minlength'] && dataProfile.get('name')?.errors?.['pattern'] && dataProfile.get('full_name')?.dirty " class="text-red-500 text-sm">{{' Name must contain letters only'}}</p>


 </div>

  
<div class="w-11/12 md:w-3/4">
   <input  [value]="profile().email"
      type="text"  formControlName="email"
      class="block p-2 w-full text-sm outline-none rounded-1 border border-gray-300  "
      placeholder="Enter your email">
     <p *ngIf="dataProfile.get('email')?.invalid && dataProfile.get('email')?.touched" class="text-red-500 text-sm">Please enter a valid email</p>

</div>

<!-- <div  class="w-11/12 md:w-3/4">
       <input [value]="profile().birthday " 
      type="text"  formControlName="birthday"
      class="block p-2 w-full text-sm outline-none rounded-1 border border-gray-300  "
      placeholder="Enter your birthday">
        <p *ngIf="dataProfile.get('birthday')?.invalid && dataProfile.get('birthday')?.touched" class="text-red-500 text-sm">birthday required</p>

</div> -->
      

 <!-- <div class="w-11/12 md:w-3/4">
          <input  [value]="profile().address"
      type="text"  formControlName="address"
      class="block p-2 w-full text-sm outline-none rounded-1 border border-gray-300  "
      placeholder="Enter your address">
        <p *ngIf="dataProfile.get('address')?.invalid && dataProfile.get('address')?.touched" class="text-red-500 text-sm">Address required</p>

</div>
      -->
  

<div class="w-11/12 md:w-3/4 flex flex-col gap-1.5">
    <!-- <a class="pacifico-regular font-semibold text-color  w-100 no-underline  " href="">Forget your password?</a> -->
    <input 
      type="submit" id="name" value="Continue"
      class="block w-full mainColor text-white p-2  cursor-pointer text-sm outline-none rounded-1 border border-gray-300  "
    >

</div>
   
</form>